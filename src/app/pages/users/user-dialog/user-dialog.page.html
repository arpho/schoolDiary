<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-back-button
      text="Ritorna alla lista degli utenti"
      class="back-button"
      defaultHref="/users-list"
      (click)="dismiss()"
      autoHide="true"></ion-back-button>
    <ion-title align="center">editing utente {{nomeStudente()}}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-tabs #tabs (ionTabsDidChange)="setSelectedTab($event.tab)">
  <ion-tab tab="home">
    <ion-header>
      <ion-toolbar>
        <ion-title>Generalità</ion-title>
      </ion-toolbar>
    </ion-header>
    <ion-content>
      <app-user-generalities2 [user]="user()"></app-user-generalities2>

      <ion-item-divider>
        <ion-label>Link al PDP</ion-label>
        <ion-button slot="end" (click)="addPdp()" size="small">
          <ion-icon name="add" slot="icon-only"></ion-icon>
        </ion-button>
      </ion-item-divider>

      <ion-list>
        @for (pdp of pdpList(); track $index) {
          <ion-item>
            <ion-grid>
              <ion-row>
                <ion-col size="5">
                  <ion-input label="Descrizione" labelPlacement="floating" [(ngModel)]="pdp.descrizione" placeholder="Es. PDP 2024"></ion-input>
                </ion-col>
                <ion-col size="5">
                  <ion-input label="URL" labelPlacement="floating" [(ngModel)]="pdp.path" placeholder="https://..."></ion-input>
                </ion-col>
                <ion-col size="2" class="ion-text-center">
                  <ion-button fill="clear" color="danger" (click)="removePdp($index)">
                    <ion-icon name="trash" slot="icon-only"></ion-icon>
                  </ion-button>
                </ion-col>
              </ion-row>
            </ion-grid>
          </ion-item>
        } @empty {
          <ion-item>
            <ion-label class="ion-text-center" color="medium">
              <p>Nessun link al PDP presente</p>
            </ion-label>
          </ion-item>
        }
      </ion-list>

    </ion-content>
  </ion-tab>
  <ion-tab tab="note">
    <ion-header>
      <ion-toolbar>
        <ion-title>Note</ion-title>
      </ion-toolbar>
    </ion-header>
    <ion-content>
    <app-reserved-notes4student [studentkey]="userKey" [ownerkey]="loggedUser().key"></app-reserved-notes4student>
    </ion-content>
  </ion-tab>
  <ion-tab tab="valutazioni">
    <ion-header>
      <ion-toolbar>
        <ion-title>Valutazioni</ion-title>
      </ion-toolbar>
    </ion-header>
    <ion-content>
<app-evaluation4-student [studentkey]="userKey" [teacherkey]="loggedUser().key"></app-evaluation4-student>
    </ion-content>
  </ion-tab>


  <ion-tab-bar slot="bottom" class="custom-tab-bar">
    <ion-tab-button tab="home" [class.tab-selected]="selectedTab === 'home'">
      <ion-icon name="person"></ion-icon>
      <ion-label>Generalità</ion-label>
    </ion-tab-button>
    <ion-tab-button tab="note" [class.tab-selected]="selectedTab === 'note'">
      <ion-icon name="document-text"></ion-icon>
      <ion-label>Note</ion-label>
    </ion-tab-button>
    <ion-tab-button tab="valutazioni" [class.tab-selected]="selectedTab === 'valutazioni'">
      <ion-icon name="sparkles"></ion-icon>
      <ion-label>Valutazioni</ion-label>
    </ion-tab-button>

  </ion-tab-bar>
</ion-tabs>

