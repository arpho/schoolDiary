<div class="groups-container">
  <h3>Gestione Gruppi</h3>
  
  @if (!classkey()) {
    <div class="alert alert-warning">
      Nessuna classe selezionata
    </div>
  } @else {
      
      @if (groupsList().length > 0) {
        <h4>Gruppi disponibili:</h4>
        <ul>

        </ul>
      } @else {
        <p>Nessun gruppo trovato per questa classe.</p>
      }
  <ion-button (click)="addGroup()">Crea Gruppo<ion-icon name="medkit"></ion-icon></ion-button>
  <div id="groupslist">
    <div>
      <p>Classe: <strong>{{classe()?.classe}}</strong></p>
      <p>Studenti: <strong>{{availableStudents().length}}</strong></p>
      <div class="drag-container"
          id="studentslist">
        <h4>Studenti disponibili</h4>
        <div
          cdkDropList
          #studentsList="cdkDropList"
          [cdkDropListData]="availableStudents()"
          class="drop-list"
          (cdkDropListDropped)="drop($event)">
          @for (student of availableStudents(); track student.key) {
            @if(student.firstName && student.lastName) {
            <div class="drag-item" cdkDrag>
              {{ student.lastName }} {{ student.firstName }}
            </div>
            }
          }
        </div>
        @for(group of groupsList(); track group.key) {
          <div class="group-item" cdkDrag>
            <h4>{{ group.nome }}</h4>
            <p>{{ group.description }}</p>
          </div>
        }
      </div>
      </div>
      
    </div>
  }

</div>
